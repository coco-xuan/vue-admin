(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["user_rights_roles"],{"05a5":function(e,t,r){},"1b6e":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("\n            权限管理\n        ")]),r("el-breadcrumb-item",[e._v("\n            权限列表\n        ")])],1),r("el-card",[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rightList,border:"",stripe:"",align:"center"}},[r("el-table-column",{attrs:{label:"#",type:"index",align:"center"}}),r("el-table-column",{attrs:{prop:"authName",label:"权限名称",align:"center"}}),r("el-table-column",{attrs:{prop:"path",label:"路径",align:"center"}}),r("el-table-column",{attrs:{prop:"level",label:"权限等级",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["0"===t.row.level?r("el-tag",[e._v("一级")]):e._e(),"1"===t.row.level?r("el-tag",{attrs:{type:"success"}},[e._v("二级")]):e._e(),"2"===t.row.level?r("el-tag",{attrs:{type:"danger"}},[e._v("三级")]):e._e()]}}])})],1)],1)],1)},s=[],a={name:"Roles",data:function(){return{rightList:[]}},methods:{},created:function(){var e=this;this.$http.get("rights/list").then((function(t){e.rightList=t.data.data}))}},o=a,i=r("2877"),l=Object(i["a"])(o,n,s,!1,null,"32173cec",null);t["default"]=l.exports},"541e":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("\n            权限管理\n        ")]),r("el-breadcrumb-item",[e._v("\n            角色列表\n        ")])],1),r("el-card",[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:e.addRoles}},[e._v("添加用户")])],1)],1),r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.rolesList,border:"",stripe:"",align:"center"}},[r("el-table-column",{attrs:{type:"expand",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return e._l(t.row.children,(function(n,s){return r("el-row",{key:n.id,class:["bdbottom",0===s?"bdtop":"","vcenter"]},[r("el-col",{attrs:{span:5}},[r("el-tag",{attrs:{closable:""},on:{close:function(r){return e.removeRightbyId(t.row,n.id)}}},[e._v(" "+e._s(n.authName)+"\n                            ")]),r("i",{staticClass:"el-icon-caret-right"})],1),r("el-col",{attrs:{span:19}},e._l(n.children,(function(n,s){return r("el-row",{key:n.id,class:[0===s?"":"bdtop","vcenter"]},[r("el-col",{attrs:{span:6}},[r("el-tag",{attrs:{type:"success",closable:""},on:{close:function(r){return e.removeRightbyId(t.row,n.id)}}},[e._v("\n                                        "+e._s(n.authName))]),r("i",{staticClass:"el-icon-caret-right"})],1),r("el-col",{attrs:{span:18}},e._l(n.children,(function(n,s){return r("el-tag",{key:n.id,attrs:{type:"warning",closable:""},on:{close:function(r){return e.removeRightbyId(t.row,n.id)}}},[e._v("\n                                        "+e._s(n.authName)+" ")])})),1)],1)})),1)],1)}))}}])}),r("el-table-column",{attrs:{label:"#",type:"index",align:"center"}}),r("el-table-column",{attrs:{prop:"roleName",label:"角色名称",align:"center"}}),r("el-table-column",{attrs:{prop:"roleDesc",label:"角色描述",align:"center"}}),r("el-table-column",{attrs:{label:"操作",align:"center",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"primary",icon:"el-icon-edit"},on:{click:function(r){return e.editRolesDialong(t.row.id)}}},[e._v("\n                        编辑\n                    ")]),r("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(r){return e.deleteAaa(t.row.id)}}},[e._v("删除\n                    ")]),r("el-button",{attrs:{size:"mini",type:"warning",icon:"el-icon-setting"},on:{click:function(r){return e.showSetRightDialong(t.row)}}},[e._v("分配角色\n                    ")])]}}])})],1)],1),r("el-dialog",{attrs:{title:"提示",width:"30%",visible:e.addRolesblooen},on:{"update:visible":function(t){e.addRolesblooen=t},close:e.editRolesclose}},[r("el-form",{ref:"rolesform",attrs:{"label-width":"80px",model:e.rolesForm,rules:e.addRolesRules}},[r("el-form-item",{attrs:{label:"名称职位",prop:"roleName"}},[r("el-input",{model:{value:e.rolesForm.roleName,callback:function(t){e.$set(e.rolesForm,"roleName",t)},expression:"rolesForm.roleName"}})],1),r("el-form-item",{attrs:{label:"职位描述",prop:"roleDesc"}},[r("el-input",{model:{value:e.rolesForm.roleDesc,callback:function(t){e.$set(e.rolesForm,"roleDesc",t)},expression:"rolesForm.roleDesc"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addRolesblooen=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addRoless}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"提示",width:"30%",visible:e.editRolesblooen},on:{"update:visible":function(t){e.editRolesblooen=t},close:e.editRolescloses}},[r("el-form",{ref:"editform",attrs:{model:e.editForm,rules:e.editRules}},[r("el-form-item",{attrs:{label:"名称职位",prop:"roleName"}},[r("el-input",{model:{value:e.editForm.roleName,callback:function(t){e.$set(e.editForm,"roleName",t)},expression:"editForm.roleName"}})],1),r("el-form-item",{attrs:{label:"职位描述",prop:"roleDesc"}},[r("el-input",{model:{value:e.editForm.roleDesc,callback:function(t){e.$set(e.editForm,"roleDesc",t)},expression:"editForm.roleDesc"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editRolesblooen=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.editRoles}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"提示",width:"30%",visible:e.setRightblooen},on:{"update:visible":function(t){e.setRightblooen=t},close:e.setRightClosed}},[r("el-tree",{ref:"treeRef",attrs:{data:e.rightslist,props:e.treeProps,"show-checkbox":"","node-key":"id","default-expand-all":"","default-checked-keys":e.defKeys}}),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.setRightblooen=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.setRight}},[e._v("确 定")])],1)],1)],1)},s=[];function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function o(e){if(Array.isArray(e))return a(e)}function i(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function l(e,t){if(e){if("string"===typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function c(e){return o(e)||i(e)||l(e)||u()}r("ac6a"),r("96cf");var d=r("1da1"),m=r("1bab");function f(){return Object(m["a"])({url:"/roles",method:"get"})}function p(e){return Object(m["a"])({url:"/roles",method:"post",data:e})}function b(e){return Object(m["a"])({url:"/roles/"+e,method:"get"})}function g(e,t){return Object(m["a"])({url:"/roles/"+e,method:"put",data:t}).catch((function(e){}))}function h(e){return Object(m["a"])({url:"/roles/"+e,method:"delete"})}function v(e,t){return Object(m["a"])({url:"/roles/".concat(e,"/rights/").concat(t),method:"delete"})}function y(){return Object(m["a"])({url:"/rights/tree",method:"get"})}var R={name:"Roles",data:function(){return{rolesList:[],addRolesblooen:!1,editRolesblooen:!1,setRightblooen:!1,rightslist:[],treeProps:{label:"authName",children:"children"},defKeys:[],roleId:"",rolesForm:{id:"",roleName:"",roleDesc:""},editForm:{},addRolesRules:{roleName:[{required:!0,message:"请输入名称",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10个字符",trigger:"blur"}],roleDesc:[{required:!0,message:"请输入描述",trigger:"blur"},{min:3,max:10,message:"长度在3到10个字符",trigger:"blur"}]},editRules:{roleName:[{required:!0,message:"请输入名称",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10个字符",trigger:"blur"}],roleDesc:[{required:!0,message:"请输入描述",trigger:"blur"},{min:3,max:10,message:"长度在3到10个字符",trigger:"blur"}]}}},created:function(){this.getRoles()},methods:{getRoles:function(){var e=this;f().then((function(t){e.rolesList=t.data}))},editRolesDialong:function(e){var t=this;this.editRolesblooen=!0,b(e).then((function(e){if(200!==e.meta.status)return t.$message.error("无法查询该用户，无法编辑");t.editForm=e.data}))},addRoles:function(){this.addRolesblooen=!0},editRolesclose:function(){this.$refs.rolesform.resetFields()},editRolescloses:function(){this.$refs.editform.resetFields()},addRoless:function(){var e=this;this.$refs.rolesform.validate(function(){var t=Object(d["a"])(regeneratorRuntime.mark((function t(r){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:p(e.rolesForm).then((function(t){if(201!==t.meta.status)return e.$message.error("添加用户失败");e.$message.success("添加成功"),e.addRolesblooen=!1,e.getRoles()}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},editRoles:function(){var e=this;this.$refs.editform.validate((function(t){t&&g(e.editForm.roleId,e.editForm).then((function(t){if(200!==t.meta.status)return e.$message.error("修改失败");e.editRolesblooen=!1,e.getRoles(),e.$message.success("修改成功")}))}))},deleteAaa:function(e){var t=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){h(e).then((function(e){if(200!==e.meta.status)return t.$message.error("删除失败");t.$message({type:"success",message:"删除成功!"}),t.getRoles()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},removeRightbyId:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(t,r){var n,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(n=e.sent,"confirm"===n){e.next=5;break}return e.abrupt("return",this.$message.info("取消了删除"));case 5:v(t.id,r).then((function(e){if(200!==e.meta.status)return s.$message.error("删除失败");t.children=e.data}));case 6:case"end":return e.stop()}}),e,this)})));function t(t,r){return e.apply(this,arguments)}return t}(),showSetRightDialong:function(e){var t=this;this.roleId=e.id,y().then((function(e){if(200!==e.meta.status)return t.$message.error("获取权限失败");t.rightslist=e.data})),this.getLeafKeys(e,this.defKeys),this.setRightblooen=!0},getLeafKeys:function(e,t){var r=this;if(!e.children)return t.push(e.id);e.children.forEach((function(e){r.getLeafKeys(e,t)}))},setRightClosed:function(){this.defKeys=[]},setRight:function(){var e=Object(d["a"])(regeneratorRuntime.mark((function e(){var t,r,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=[].concat(c(this.$refs.treeRef.getCheckedKeys()),c(this.$refs.treeRef.getHalfCheckedKeys())),r=t.join(","),e.next=4,this.$http.post("roles/".concat(this.roleId,"/rights"),{rids:r});case 4:if(n=e.sent,s=n.data,200===s.meta.status){e.next=8;break}return e.abrupt("return",this.$message.error("分配权限失败"));case 8:this.$message.success("分配权限成功"),this.getRoles(),this.setRightblooen=!1;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}},w=R,k=(r("7b4f"),r("2877")),x=Object(k["a"])(w,n,s,!1,null,"5f0fdca0",null);t["default"]=x.exports},7088:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("el-breadcrumb",{attrs:{separator:"/"}},[r("el-breadcrumb-item",{attrs:{to:{path:"/welcome"}}},[e._v("首页")]),r("el-breadcrumb-item",[e._v("\n            "+e._s(e.getmenus.authName)+"\n        ")]),e._l(e.getmenus.children,(function(t){return r("el-breadcrumb-item",{key:t.id},[e._v("\n            "+e._s(t.authName)+"\n        ")])}))],2),r("el-card",{staticClass:"box-card"},[r("el-row",{attrs:{gutter:20}},[r("el-col",{attrs:{span:7}},[r("el-input",{attrs:{placeholder:"请输入内容",clearable:""},on:{clear:e.getUserList},model:{value:e.queryInfo.query,callback:function(t){e.$set(e.queryInfo,"query",t)},expression:"queryInfo.query"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.getUserList},slot:"append"})],1)],1),r("el-col",{attrs:{span:4}},[r("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("添加用户")])],1)],1),r("el-table",{attrs:{data:e.userlist,border:"",stripe:""}},[r("el-table-column",{attrs:{type:"index",label:"#"}}),r("el-table-column",{attrs:{label:"姓名",prop:"username"}}),r("el-table-column",{attrs:{label:"邮箱",prop:"email"}}),r("el-table-column",{attrs:{label:"电话",prop:"mobile"}}),r("el-table-column",{attrs:{label:"角色",prop:"role_name"}}),r("el-table-column",{attrs:{label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"pink"},on:{change:function(r){return e.userStatechange(t.row)}},model:{value:t.row.mg_state,callback:function(r){e.$set(t.row,"mg_state",r)},expression:"scope.row.mg_state"}})]}}])}),r("el-table-column",{attrs:{label:"操作",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(r){return e.editUserdialong(t.row.id)}}}),r("el-button",{attrs:{type:"danger",icon:"el-icon-delete",size:"mini"},on:{click:function(r){return e.removeUser(t.row.id)}}}),r("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"分配角色",placement:"top",enterable:!1}},[r("el-button",{attrs:{type:"warning",icon:"el-icon-setting",size:"mini"},on:{click:function(r){return e.setRole(t.row)}}})],1)]}}])})],1),r("el-pagination",{attrs:{"current-page":e.queryInfo.pagenum,"page-sizes":[1,2,6,10],"page-size":e.queryInfo.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),r("el-dialog",{attrs:{title:"添加用户",visible:e.addUserblooen,width:"50%"},on:{"update:visible":function(t){e.addUserblooen=t},close:e.addDialongClose}},[r("el-form",{ref:"addFormRef",staticClass:"demo-ruleForm",attrs:{model:e.addForm,rules:e.addFormrules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"用户名",prop:"username"}},[r("el-input",{model:{value:e.addForm.username,callback:function(t){e.$set(e.addForm,"username",t)},expression:"addForm.username"}})],1),r("el-form-item",{attrs:{label:"密码",prop:"password"}},[r("el-input",{model:{value:e.addForm.password,callback:function(t){e.$set(e.addForm,"password",t)},expression:"addForm.password"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{model:{value:e.addForm.email,callback:function(t){e.$set(e.addForm,"email",t)},expression:"addForm.email"}})],1),r("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[r("el-input",{model:{value:e.addForm.mobile,callback:function(t){e.$set(e.addForm,"mobile",t)},expression:"addForm.mobile"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.addUserblooen=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addUsers}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"编辑用户",visible:e.editUserblooen,width:"50%"},on:{"update:visible":function(t){e.editUserblooen=t},close:e.editDialongClose}},[r("el-form",{ref:"editFormRef",attrs:{model:e.editForm,rules:e.editFormrules,"label-width":"70px"}},[r("el-form-item",{attrs:{label:"用户名"}},[r("el-input",{attrs:{disabled:""},model:{value:e.editForm.username,callback:function(t){e.$set(e.editForm,"username",t)},expression:"editForm.username"}})],1),r("el-form-item",{attrs:{label:"邮箱",prop:"email"}},[r("el-input",{model:{value:e.editForm.email,callback:function(t){e.$set(e.editForm,"email",t)},expression:"editForm.email"}})],1),r("el-form-item",{attrs:{label:"手机",prop:"mobile"}},[r("el-input",{model:{value:e.editForm.mobile,callback:function(t){e.$set(e.editForm,"mobile",t)},expression:"editForm.mobile"}})],1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.editUserblooen=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.editUsers}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"分配角色",visible:e.setRoleDiablooen,width:"50%"},on:{"update:visible":function(t){e.setRoleDiablooen=t},close:e.setRoleDialongClose}},[r("p",[e._v("当前的用户："+e._s(e.userInfo.username))]),r("p",[e._v("当前的角色： "+e._s(e.userInfo.role_name))]),r("p",[e._v("分配新角色：\n            "),r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.selectedRoleId,callback:function(t){e.selectedRoleId=t},expression:"selectedRoleId"}},e._l(e.rolesList,(function(e){return r("el-option",{key:e.id,attrs:{label:e.roleName,value:e.id}})})),1)],1),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.setRoleDiablooen=!1}}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.saveRoleInfo}},[e._v("确 定")])],1)])],1)},s=[],a=(r("96cf"),r("1da1")),o=r("9f9e"),i={name:"User",data:function(){var e=function(e,t,r){var n=/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(\.[a-zA-Z0-9_-])+/;if(n.test(t))return r();r(new Error("请输入合法的邮箱"))},t=function(e,t,r){var n=/^(0|86|17951)?(13[0-9]|15[01223456789]|17[678]|18[0-9]|14[5-7])[0-9]{8}$/;if(n.test(t))return r();r(new Error("请输入合法的手机号码"))};return{getmenus:{},queryInfo:{query:"",pagenum:1,pagesize:6},userlist:[],total:0,addUserblooen:!1,editUserblooen:!1,setRoleDiablooen:!1,addForm:{username:"",password:"",mobile:"",email:""},editForm:{},userInfo:{},rolesList:[],selectedRoleId:"",addFormrules:{username:[{required:!0,message:"请输入登录名",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:3,max:10,message:"长度在 3 到 10个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:e,trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:t,trigger:"blur"}]},editFormrules:{email:[{required:!0,message:"请输入邮箱",trigger:"blur"},{validator:e,trigger:"blur"}],mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:t,trigger:"blur"}]}}},created:function(){var e=this;Object(o["a"])().then((function(t){e.getmenus=t.data[0]})),this.getUserList()},methods:{handleSizeChange:function(e){this.queryInfo.pagesize=e,this.getUserList()},handleCurrentChange:function(e){this.queryInfo.pagenum=e,this.getUserList()},addUser:function(){this.addUserblooen=!0},editUserdialong:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("users/"+t);case 2:if(r=e.sent,n=r.data,200===n.meta.status){e.next=6;break}return e.abrupt("return",this.$message.error("获取用户信息失败"));case 6:this.editForm=n.data,this.editUserblooen=!0;case 8:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),addDialongClose:function(){this.$refs.addFormRef.resetFields()},editDialongClose:function(){this.$refs.editFormRef.resetFields()},addUsers:function(){var e=this;this.$refs.addFormRef.validate(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r){var n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.post("users",e.addForm);case 4:n=t.sent,s=n.data,201!==s.meta.status&&e.$message.error("添加用户失败"),e.$message.success("添加用户成功"),e.addUserblooen=!1,e.getUserList();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},editUsers:function(){var e=this;this.$refs.editFormRef.validate(function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(r){var n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.$http.put("users/"+e.editForm.id,{email:e.editForm.email,mobile:e.editForm.mobile});case 4:n=t.sent,s=n.data,200!==s.meta.status&&e.$message.error("修改用户失败"),e.editForm=s.data,e.$message.success("修改用户成功"),e.editUserblooen=!1,e.getUserList();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},getUserList:function(){var e=this;Object(o["b"])(this.queryInfo).then((function(t){e.userlist=t.data.users,e.total=t.data.total}))},userStatechange:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.put("users/".concat(t.id,"/state/").concat(t.mg_state));case 2:if(r=e.sent,n=r.data,200===n.meta.status){e.next=9;break}return t.mg_state=!t.mg_state,e.abrupt("return",this.$message.error("更新失败"));case 9:return e.abrupt("return",this.$message.success("更新成功"));case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),removeUser:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).catch((function(e){return e}));case 2:if(r=e.sent,"confirm"===r){e.next=5;break}return e.abrupt("return",this.$message.info("已经取消了删除"));case 5:return e.next=7,this.$http.delete("users/"+t);case 7:if(n=e.sent,s=n.data,200===s.meta.status){e.next=11;break}return e.abrupt("return",this.$message.error("删除用户失败"));case 11:this.$message.success("删除用户成功"),this.getUserList();case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),setRole:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.userInfo=t,e.next=3,this.$http.get("/roles");case 3:if(r=e.sent,n=r.data,200===n.meta.status){e.next=7;break}return e.abrupt("return",this.$message.error("获取角色列表失败"));case 7:this.rolesList=n.data,this.setRoleDiablooen=!0;case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),saveRoleInfo:function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.selectedRoleId){e.next=2;break}return e.abrupt("return",this.$message.error("请选择分配的角色"));case 2:return e.next=4,this.$http.put("users/".concat(this.userInfo.id,"/role"),{id:this.userInfo.id,rid:this.selectedRoleId});case 4:if(t=e.sent,r=t.data,200===r.meta.status){e.next=8;break}return e.abrupt("return",this.$message.error("更新角色失败！"));case 8:this.$message.success("更新角色成功！"),this.getUserList(),this.setRoleDiablooen=!1;case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),setRoleDialongClose:function(){this.selectedRoleId="",this.userInfo=""}}},l=i,u=r("2877"),c=Object(u["a"])(l,n,s,!1,null,"92573f12",null);t["default"]=c.exports},"7b4f":function(e,t,r){"use strict";r("05a5")},"9f9e":function(e,t,r){"use strict";r.d(t,"a",(function(){return s})),r.d(t,"b",(function(){return a}));var n=r("1bab");function s(){return Object(n["a"])({url:"/menus"}).catch((function(e){}))}function a(e){return Object(n["a"])({url:"/users",params:e})}},ac6a:function(e,t,r){for(var n=r("cadf"),s=r("0d58"),a=r("2aba"),o=r("7726"),i=r("32e9"),l=r("84f2"),u=r("2b4c"),c=u("iterator"),d=u("toStringTag"),m=l.Array,f={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},p=s(f),b=0;b<p.length;b++){var g,h=p[b],v=f[h],y=o[h],R=y&&y.prototype;if(R&&(R[c]||i(R,c,m),R[d]||i(R,d,h),l[h]=m,v))for(g in n)R[g]||a(R,g,n[g],!0)}}}]);
//# sourceMappingURL=user_rights_roles.ac58899c.js.map